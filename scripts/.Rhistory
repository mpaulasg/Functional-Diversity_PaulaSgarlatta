save(FD_kelp_Hill, file=here::here("outputs/", "FD_kelp_Hill.RData") )
save(TD_beta_kelp, file=here::here("outputs/", "TD_beta_kelp_Hill.RData") )
save(FD_beta_kelp, file=here::here("outputs/", "FD_beta_kelp_Hill.RData") )
save(FD_beta_kelp_Hill_sites, file=here::here("outputs/", "FD_beta_kelp_Hill_sites.RData") )
save(TD_beta_kelp_Hill_sites, file=here::here("outputs/", "TD_beta_kelp_Hill_sites.RData") )
##############################################  NO KELP  #########################################################################
#Taxonomic diversity
nokelp_tax_Hill   <- alpha.fd.hill (asb_sp_w = nokelp_sp_occ,
sp_dist = sp_dist_funct,
q = 0, # Only 0 because the three values of q give same results (as is species richness)
tau= "min") #This gives you the taxonomic profile
TD_nokelp_Hill <- nokelp_tax_Hill$asb_FD_Hill
# Functional diversity: number of species, functional richness, dispersion and identity (along 3 axes)
nokelp_alpha_FDhill <- mFD::alpha.fd.hill (asb_sp_w = nokelp_sp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean") #This gives you functional diversity, as recommended in Chao et al 2019
FD_nokelp_Hill <- nokelp_alpha_FDhill$asb_FD_Hill
## computing tax/functional beta-diversity based on Hill numbers ####
#Taxonomic dissimilarity
nokelp_beta_taxhill <-beta.fd.hill (asb_sp_w = nokelp_sp_occ,
sp_dist = sp_dist_funct,
q = c(0,1, 2),
tau= "min",
beta_type = "Jaccard")
# Then use the mFD::dist.to.df function to ease visualizing result
TD_beta_nokelp <- dist.to.df(nokelp_beta_taxhill$beta_fd_q) %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2)
# functional dissimilarity
nokelp_beta_FDhill <- mFD::beta.fd.hill (asb_sp_w = nokelp_sp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean",
beta_type = "Jaccard")
# Then use the mFD::dist.to.df function to ease visualizing result
FD_beta_nokelp <- dist.to.df(nokelp_beta_FDhill$beta_fd_q)%>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2)
#With sites - for statystical analysis
FD_beta_nokelp_sites <- dist.to.df(nokelp_beta_FDhill$beta_fd_q)%>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
mutate(Site=sub("_.*", "", x1)) %>%
select(Year1, Year2, Site, q0, q1, q2)
######## Obtain beta diversity for both datasets together ###
#Merge both datasets
FD_beta_kelp <- FD_beta_kelp %>%
mutate(Habitat2="Kelp")
FD_beta_nokelp <- FD_beta_nokelp %>%
mutate(Habitat1="No_kelp")
FD_beta_temporal_all <- left_join(FD_beta_kelp, FD_beta_nokelp, by="q0")
View(FD_beta_temporal_all)
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
kelp_nokelp <- full_join(kelp_sp_maxN, nokelp_sp_maxN)
View(kelp_sp_maxN)
kelp_sp_maxN <- as.data.frame(kelp_sp_maxN)
nokelp_sp_maxN <- as.data.frame(nokelp_sp_maxN)
kelp_nokelp <- full_join(kelp_sp_maxN, nokelp_sp_maxN)
View(nokelp_metadata)
View(nokelp_sp_maxN)
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
View(nokelp_metadata)
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
#column_to_rownames("Code") %>%
#as.matrix()
head(nokelp_sp_maxN)
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
#column_to_rownames("Code") %>%
#as.matrix()
head(nokelp_sp_maxN)
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
#column_to_rownames("Code") %>%
#as.matrix()
head(nokelp_sp_maxN)
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
View(nokelp_sp_maxN)
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
View(nokelp)
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
View(nokelp)
View(kelp)
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
kelp$Habitat <- "Kelp"
nokelp$Habitat <- "No_kelp"
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(betapart)
library(dplyr)
# loading data
load(here::here("data", "kelp_sp_occ.RData") )
load(here::here("data", "nokelp_sp_occ.RData") )
load(here::here("outputs", "sp_3D_coord.RData") )
# computing Euclidean distance between species in the 3D space
sp_dist_funct <- dist(sp_3D_coord)
kelp_beta_taxhill <-beta.fd.hill (asb_sp_w = kelp_sp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "min",
beta_type = "Jaccard")
View(kelp_beta_taxhill)
kelp_beta_taxhill$beta_fd_q
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
### Joining both datasets
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
write.csv(kelp_nokelp, here::here("data/kelp_nokelp.csv"))
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
### Joining both datasets
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
### Joining both datasets
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp <- full_join(kelp, nokelp, by="Code")
View(kelp_nokelp)
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
### Joining both datasets
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp <- full_join(kelp, nokelp)
View(kelp_nokelp)
write.csv(kelp_nokelp, here::here("data/kelp_nokelp.csv"))
kelp_nokelp[is.na(kelp_nokelp)] <- 0
View(kelp_nokelp)
kelp_nokelp <- kelp_nokelp %>%
column_to_rownames("Code")
kelp_nokelp_metadata <- read.csv(here::here("data", "raw_data", "kelp_nokelp_metadata.csv") )
kelp_nokelp_summary <- mFD::asb.sp.summary(asb_sp_w = kelp_nokelp)
kelp_nokelp <- kelp_nokelp %>%
column_to_rownames("Code") %>%
as.matrix()
################################################################################
##
## Script for preparing fish occurrence datasets
##
## Code by Camille Magneville, SÃ©bastien villÃ©ger and Paula Sgarlatta
##
################################################################################
rm(list=ls()) # cleaning memory
# libraries
library(tidyverse)
library(here)
library(mFD)
library(dplyr)
## temporal survey data ####
# loading raw data from csv----
# metadata and data from sites without kelp
nokelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_metadata.csv") )
head(nokelp_metadata)
unique(nokelp_metadata$Site) # 4 sites
unique(nokelp_metadata$Year) # 14 years
nokelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(nokelp_sp_maxN)
# metadata and data from sites that use to have kelp and lost it:
kelp_metadata <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_metadata.csv") )
head(kelp_metadata)
unique(kelp_metadata$Site) # 5 sites
unique(kelp_metadata$Year) # 14 years
kelp_sp_maxN <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") ) %>%
column_to_rownames("Code") %>%
as.matrix()
head(kelp_sp_maxN)
### Joining both datasets
kelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_kelp_species.csv") )
nokelp <- read.csv(here::here("data", "raw_data", "TemporalBRUV_nokelp_species.csv") )
kelp_nokelp_metadata <- read.csv(here::here("data", "raw_data", "kelp_nokelp_metadata.csv") )
kelp_nokelp <- full_join(kelp, nokelp)
#Changing NA's to 0
kelp_nokelp[is.na(kelp_nokelp)] <- 0
kelp_nokelp <- kelp_nokelp %>%
column_to_rownames("Code") %>%
as.matrix()
kelp_nokelp_summary <- mFD::asb.sp.summary(asb_sp_w = kelp_nokelp)
kelp_nokelp_occ <- kelp_nokelp_summary$asb_sp_occ
dim(kelp_nokelp_occ)
kelp_nokelp_sp <- colnames(kelp_nokelp_occ) # 106 sp
length(kelp_nokelp_sp) # 106 sp
save(kelp_nokelp_metadata, file=here::here("data", "kelp_nokelp_metadata.RData") )
save(kelp_nokelp_occ, file=here::here("data", "kelp_nokelp_occ.RData") )
save(kelp_nokelp_summary, file=here::here("data", "kelp_nokelp_summary.RData") )
load(here::here("data", "kelp_nokelp_occ.RData") )
load(here::here("outputs", "sp_3D_coord.RData") )
sp_dist_funct <- dist(sp_3D_coord)
kelp_nokelp_tax_Hill   <- alpha.fd.hill (asb_sp_w = kelp_nokelpocc,
sp_dist = sp_dist_funct,
q = 0, # Only 0 because the three values of q give same results (as is species richness)
tau= "min") #This gives you the taxonomic profile
kelp_nokelp_tax_Hill   <- alpha.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = 0, # Only 0 because the three values of q give same results (as is species richness)
tau= "min") #This gives you the taxonomic profile
TD_kelp_nokelp_Hill <- kelp_nokelptax_Hill$asb_FD_Hill
TD_kelp_nokelp_Hill <- kelp_nokelp_tax_Hill$asb_FD_Hill
View(TD_kelp_nokelp_Hill)
kelp_nokelp_alpha_FDhill <- mFD::alpha.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean") #This gives you functional diversity, as recommended in Chao et al 2019
FD_kelp_nokelp_Hill <- kelp_nokelp_alpha_FDhill$asb_FD_Hill
kelp_nokelp_beta_taxhill <-beta.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "min",
beta_type = "Jaccard")
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2)
# functional dissimilarity
kelp_nokelp_beta_FDhill <- mFD::beta.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean",
beta_type = "Jaccard")
FD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_FDhill$beta_fd_q)%>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2)
load(here::here("outputs", "kelp_nokelp_metadata.RData") )
load(here::here("data", "kelp_nokelp_metadata.RData") )
TD_kelp_nokelp <- left_join(TD_kelp_nokelp_Hill, kelp_nokelp_metadata, by="Code")
TD_kelp_nokelp_Hill <- kelp_nokelp_tax_Hill$asb_FD_Hill %>%
as.matrix()
TD_kelp_nokelp <- left_join(TD_kelp_nokelp_Hill, kelp_nokelp_metadata, by="Code")
View(kelp_nokelp_metadata)
kelp_nokelp_metadata <- as.matrix()
kelp_nokelp_metadata <- as.matrix(kelp_nokelp_metadata)
TD_kelp_nokelp <- left_join(TD_kelp_nokelp_Hill, kelp_nokelp_metadata, by="Code")
TD_kelp_nokelp <- left_join(kelp_nokelp_metadata, TD_kelp_nokelp_Hill, by="Code")
View(TD_kelp_nokelp_Hill)
TD_kelp_nokelp_Hill <- kelp_nokelp_tax_Hill$asb_FD_Hill %>%
as.data.frame()
kelp_nokelp_metadata <- as.data.frame(kelp_nokelp_metadata)
TD_kelp_nokelp <- left_join(kelp_nokelp_metadata, TD_kelp_nokelp_Hill, by="Code")
View(TD_kelp_nokelp_Hill)
TD_kelp_nokelp_Hill <- kelp_nokelp_tax_Hill$asb_FD_Hill %>%
as.data.frame() %>%
rownames_to_column("Code")
TD_kelp_nokelp <- left_join(kelp_nokelp_metadata, TD_kelp_nokelp_Hill, by="Code")
View(TD_kelp_nokelp)
kelp_nokelp_alpha_FDhill <- mFD::alpha.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean") #This gives you functional diversity, as recommended in Chao et al 2019
FD_kelp_nokelp_Hill <- kelp_nokelp_alpha_FDhill$asb_FD_Hill
FD_kelp_nokelp_Hill <- kelp_nokelp_alpha_FDhill$asb_FD_Hill %>%
as.data.frame() %>%
rownames_to_column("Code")
FD_kelp_nokelp <- left_join(kelp_nokelp_metadata, FD_kelp_nokelp_Hill, by="Code")
kelp_nokelp_beta_taxhill <-beta.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "min",
beta_type = "Jaccard")
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2)
View(TD_beta_kelp_nokelp)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2, Code)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
rownames_to_column("Code") %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2)) %>%
select(Year1, Year2, q0, q1, q2, Code)
kelp_nokelp_beta_taxhill$beta_fd_q
see <- kelp_nokelp_beta_taxhill$beta_fd_q
View(see)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
rownames_to_column("Code") %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1)) %>%
select(Year1, Year2, q0, q1, q2, Code)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
rownames_to_column("Code") %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1)) %>%
select(Year1, Year2, q0, q1, q2, Code, Site1)
View(TD_beta_kelp_nokelp)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
rownames_to_column("Code") %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2) ) %>%
select(Year1, Year2, q0, q1, q2, Code, Site1, Site2)
# functional dissimilarity
kelp_nokelp_beta_FDhill <- mFD::beta.fd.hill (asb_sp_w = kelp_nokelp_occ,
sp_dist = sp_dist_funct,
q = c(0, 1, 2),
tau= "mean",
beta_type = "Jaccard")
FD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_FDhill$beta_fd_q)%>%
as.data.frame() %>%
rownames_to_column("Code") %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2)) %>%
select(Year1, Year2, q0, q1, q2, Code, Site1, Site2)
TD_beta_k_nokelp <- left_join(kelp_nokelp_metadata, TD_beta_kelp_nokelp, by="Code")
View(TD_beta_k_nokelp)
TD_beta_k_nokelp <- left_join(kelp_nokelp_metadata, TD_beta_kelp_nokelp, by=c("Code", "Habitat"))
View(TD_beta_k_nokelp)
View(TD_beta_kelp_nokelp)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2) ) %>%
select(Year1, Year2, q0, q1, q2, Code, Site1, Site2)
View(TD_beta_kelp_nokelp)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2) ) %>%
select(Year1, Year2, q0, q1, q2, Site1, Site2)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2),
Site=paste(x1,x2), sep="_") %>%
select(Year1, Year2, q0, q1, q2, Site1, Site2)
TD_beta_kelp_nokelp <- dist.to.df(kelp_nokelp_beta_taxhill$beta_fd_q) %>%
as.data.frame() %>%
mutate(Year1=sub(".*_", "", x1), Year2=sub(".*_", "", x2), Site1=sub("_.*", "", x1), Site2=sub("_.*", "", x2),
Site=paste(x1,x2), sep="_") %>%
select(Year1, Year2, q0, q1, q2, Site1, Site2, Site)
